(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{202:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var o=n(58),i=n(33),r=n(3),a=n(34);function u(e){const t=document.querySelector(".navi"),n=document.querySelector(".navi-menu"),u=document.querySelector(".navi-sections"),s=document.querySelector(".navi-bar__button--menu"),c=document.querySelectorAll(".navi-sections__item"),d=document.querySelectorAll(".navi-sections__item--has-submenu"),l=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].getAttribute("data-section"));return t}(d),m=document.querySelectorAll(".navi-submenu"),f=Array.from(document.querySelectorAll(".navi-submenu__close")),v=n.querySelectorAll(".navi-sign-in-link");"true"!==t.getAttribute(a.b)&&e.regUiClient.addTextElements(v);const p={leftTop:{x:0,y:0},leftBottom:{x:0,y:0}},b=[],h=Object(i.a)([r.a.UP,r.a.DOWN,r.a.LEFT,r.a.RIGHT,r.a.HOME,r.a.END]),y=Object(i.a)([r.a.ENTER,r.a.SPACE]),E={depth:0,index:0,oldIndex:[]},x={0:c,1:[],2:[]},g={},A={};function _(e,t){return(t.y-e.y)/(t.x-e.x)}function L(e){!function(){const e=n.getBoundingClientRect();p.leftTop.x=e.left,p.leftTop.y=e.top-300,p.leftBottom.x=e.left,p.leftBottom.y=e.bottom+300}();const t=b[0];if(!t)return!0;const o={x:e.pageX,y:e.pageY},i=p.leftTop,r=p.leftBottom,a=_(o,i),u=_(o,r),s=_(t,i),c=_(t,r);return a<s&&u>c}const S=Object(o.a)((e=>{b.push({x:e.pageX,y:e.pageY,d:new Date}),b.length>3&&b.shift()}),50);function k(e){d.forEach((e=>{!function(e){if(e){const t="true"===e.getAttribute("data-submenu");e.removeAttribute("data-selected"),e.removeEventListener("keydown",B),x[1]=[],t&&e.setAttribute("aria-expanded","false")}}(e)})),m.forEach(N);const t=document.querySelector(`.navi-sections__item--${e}`);!function(e,t){e&&(e.classList.add("navi-submenu--is-open"),e.setAttribute("aria-hidden","false"),x[1]=e.querySelectorAll(".navi-submenu__item"),x[2]=e.querySelectorAll(".navi-submenu__close"),t&&t.setAttribute("aria-expanded","true"))}(document.querySelector(`.navi-submenu--${e}`),t),I(t)}function q(e){return g[e]||(g[e]=function(t){L(t)||k(e)}),g[e]}function w(e){(-1!==f.indexOf(e.target)||e.target!==s&&!n.contains(e.target))&&T()}function T(){e.close("desktop-menu")}function D(e){return A[e]||(A[e]=function(t){if(!t.target.classList.contains("navi-sections__item--hover")){"true"!==t.target.parentElement.parentElement.dataset.selected&&(t.preventDefault(),k(e))}}),A[e]}function O(e){const{keyCode:t}=e;let n;if(h.has(t)){e.preventDefault();const o=x[E.depth];switch(t){case r.a.DOWN:n=E.index+1,n=n>o.length-1?0:n,E.index=n;break;case r.a.UP:n=E.index-1,n=n<0?o.length-1:n,E.index=n;break;case r.a.RIGHT:if(n=Math.min(E.depth+1,2),n===E.depth||!x[n].length)return;E.oldIndex[E.depth]=E.index,E.index=0,E.depth=n;break;case r.a.LEFT:if(n=Math.max(E.depth-1,0),n===E.depth||!x[n].length)return;E.index=E.oldIndex[n],E.depth=n;break;case r.a.HOME:E.index=0;break;case r.a.END:E.index=o.length-1}const i=x[E.depth][E.index];if(!i)return void(E.depth=0);const a=i.getAttribute("data-section");a&&k(a),I(i)}t===r.a.ESCAPE&&T()}function C(e){n.contains(e.relatedTarget)||T()}function B(e){const{keyCode:t}=e;if(y.has(t)){const t=e.target.querySelector("a");t&&(e.preventDefault(),t.click())}}function I(e){if(e){const t="true"===e.getAttribute("data-submenu");e.focus(),e.setAttribute("data-selected","true"),e.addEventListener("keydown",B),t&&e.setAttribute("aria-expanded","true")}}function N(e){e&&(x[1]=[],x[2]=[],e.classList.remove("navi-submenu--is-open"),e.setAttribute("aria-hidden","true"))}function H(){E.index=0,E.depth=0}return{open(){H(),document.addEventListener("click",w,!0),u.addEventListener("mousemove",S),s.addEventListener("mousemove",S),s.setAttribute("aria-expanded","true"),n.addEventListener("keydown",O),n.addEventListener("focusout",C),n.setAttribute("aria-hidden","false");const e="view"===(t=document.querySelector(".navi").getAttribute("data-brand"))||"gadfly"===t?"opinion":t||"business";var t;l.forEach((t=>{const n=document.querySelector(`.navi-sections__item--${t}`),o=n.querySelector(".navi-sections__link");n.addEventListener("mousemove",q(t)),n.addEventListener("touchstart",D(t)),o.addEventListener("focus",D(t)),t===e&&setTimeout((()=>o.focus()),100)})),k(e),I(x[E.depth][E.index])},close(){H(),l.forEach((e=>{const t=document.querySelector(`.navi-sections__item--${e}`),n=t.querySelector(".navi-sections__link");t.removeEventListener("mousemove",q(e)),t.removeEventListener("touchstart",D(e)),n.removeEventListener("focus",D(e))})),n.removeEventListener("keydown",O),n.setAttribute("aria-hidden","true"),s.focus(),s.removeEventListener("mousemove",S),s.setAttribute("aria-expanded","false"),u.removeEventListener("mousemove",S),document.removeEventListener("click",w,!0)}}}}}]);